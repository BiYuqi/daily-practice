<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
    </head>
    <body>
        <script>
            /**
            *    1.首先要指定好谁充当发布者（比如售楼处）
            *    2.然后发布者添加一个缓存列表，用于存放回调函数以便通知订阅者（售楼处的花名册）
            *    3.最后发布消息的时候，发布者会遍历这个缓存列表，依次触发回到函数
            */

            // 还可以在回调函数里填入一些参数，订阅者可以接受这些参数，比如售楼处，可以再在消息里面，添加房价，面积，容积率等

            var saleOffies = {} // 售楼处

            saleOffies.clientList = [] // 缓存列表

            saleOffies.listen = function(fn){  //增加订阅者
                this.clientList.push(fn)
            }

            saleOffies.trigger = function(){
                for(var i=0;i<this.clientList.length;i++){
                    this.clientList[i].apply(this,arguments)
                }
            }

            saleOffies.listen(function(price,sq){ //小明
                console.log('价格'+price)
                console.log('面积'+sq)
            })

            saleOffies.listen(function(price,sq){ // 小红
                console.log('价格'+price)
                console.log('面积'+sq)
            })

            saleOffies.trigger(20000,88)
            console.log('----------------------')
            saleOffies.trigger(30000,188)


        </script>
    </body>
</html>
