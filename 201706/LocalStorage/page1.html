<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <style media="screen">
            select{
                width: 100px;
            }
            .next-page{
                width: 100px;
                height: 40px;
                line-height: 40px;
                border: 1px solid green;
                margin: 14px 0;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <div class="page1">
            <select class="select-range">

            </select>
            <div class="btn">
                点击
            </div>
            <a href="page2.html" class="next-page" target="_blank">新增选项</a>
        </div>
        <script>
            var data = [
                {name:"tag1",value:"1"},
                {name:"tag2",value:"2"}
            ]

            function $(el){
                return document.querySelector(el)
            }
            function addOptions(dom,data){
                if(typeof getData('opts') === 'object'){
                    data = getData('opts')
                }
                for(i in data){
                    var opt = new Option(data[i].name,data[i].value)
                    dom.add(opt)
                }
            }
            addOptions($('.select-range'),data)

            function saveData(name,d){
                localStorage.setItem(name,JSON.stringify(d))
            }
            function getData(name){
                return JSON.parse(localStorage.getItem(name))
            }

            saveData('opts',data)

            // $('.btn').onclick = function(){
            //     localStorage.setItem('k','atom')
            // }
            window.addEventListener("storage", function (e) {
                if(e.key === 'opts'){
                    addOptions($('.select-range'),data)
                }
            });
        </script>
    </body>
</html>
