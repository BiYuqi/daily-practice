<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
    </head>
    <body>
        <input type="file" class="inputs" multiple>
        <script>
            const $ = function(el) {
                return document.querySelector(el)
            }
            const readerFileAndUpLoad = function(options){
                return new Promise(function(resolve,reject){
                    let el , res = [];

                    if(typeof options.el === 'string'){
                        el = document.querySelector(options.el)
                    }else{
                        el = options.el
                    }

                    const filesUlp = function(){
                        var files = this.files;
                        for(let i=0;i<files.length;i++){
                            const oFReader = new FileReader()

                            oFReader.onloadend = function(e){
                                res.push(e.target.result)
                            }
                            oFReader.readAsDataURL(files[i])
                            if(i === files.length-1){
                                resolve(res)
                            }
                        }
                        // options.imgs(res)
                        // options.files(files)
                        // resolve([res,files])
                    }
                    if(window.addEventListener){
                        el.addEventListener('change',filesUlp,false)
                    }else{
                        el.attachEvent('onchange',filesUlp,false)
                    }
                })

            }
            readerFileAndUpLoad({
                el:'.inputs'
            }).then(function(data){
                
                })
            /**
                if (navigator.appName === "Microsoft Internet Explorer") {
                    return function () {
                        document.getElementById("imagePreview").filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = document.getElementById("imageInput").value;

                    }
                }
            */
        </script>
    </body>
</html>
